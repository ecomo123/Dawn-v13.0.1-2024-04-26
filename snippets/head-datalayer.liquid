<script>
  window.dataLayer = window.dataLayer || [];
  {% if customer %}
      dataLayer.push({
        'event': 'user_data',
        'ecommerce' : {
        'currency': {{shop.currency | json}},
        },
        'user_data': "{{customer.id | default:undefined}}",
        'email_address': "{{customer.email | default: undefined }}"
       
      });
    {% endif %}
</script>

{% if template contains 'product' %}
  {% render 'product-datalayer', product: product %}
{% endif -%}
